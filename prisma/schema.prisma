
// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int          @id @default(autoincrement())
  fullName      String?
  username      String       @unique
  email         String       @unique
  password_hash String
  role          String?      @default("author")
  manuscripts   Manuscript[]
}

model Manuscript {
  id String @id @default(cuid())
  articleTitle           String
  abstract               String @db.Text
  keywords               String
  journalCategoryId      String
  isSpecialReview        Boolean   @default(false)
  
  coverLetterFileName    String?
  manuscriptFileName     String
  supplementaryFilesName String?
  
  authorAgreement        Boolean
  coAuthors              String? @db.Text // Changed from Json to String (as Text)
  
  status                 String    @default("Submitted")
  submittedAt            DateTime  @default(now())

  // New fields for tracking
  views                  Int       @default(0)
  downloads              Int       @default(0)
  citations              Int       @default(0)

  // Relation to User
  submittedById          Int
  submittedBy            User      @relation(fields: [submittedById], references: [id])
}
